# KnowledgeScout - AI-Powered Document Q&A

A modern, full-stack document question-answering system built with Next.js 15, featuring semantic search powered by AI embeddings and GPT-4o-mini for natural language answers. Upload documents, ask questions, and get instant, contextual answers with AI-generated responses.

![KnowledgeScout](https://img.shields.io/badge/Next.js-15-black?style=for-the-badge&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.9-blue?style=for-the-badge&logo=typescript)
![SQLite](https://img.shields.io/badge/SQLite-3-blue?style=for-the-badge&logo=sqlite)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)

## âœ¨ Features

- **ğŸ¤– AI-Powered Answers** - GPT-4o-mini generates natural language answers based on your documents
- **ğŸ” Semantic Search** - Vector embeddings for accurate, context-aware document retrieval
- **ğŸ“„ Document Management** - Upload, view, and delete documents (PDF, TXT, MD, DOCX)
- **ğŸ—‘ï¸ Easy Deletion** - Remove documents with a single click and confirmation dialog
- **ğŸ’¬ Interactive Q&A** - Ask questions in natural language and get AI-generated answers with source citations
- **ğŸ” Secure Authentication** - JWT-based auth with role-based access control (Admin/User)
- **âš¡ Real-time Updates** - Live document processing and instant search results
- **ğŸ¨ Modern UI** - Beautiful, responsive interface with dark mode support
- **ğŸ“Š Admin Dashboard** - Comprehensive analytics and index management tools
- **ğŸ”’ Privacy Controls** - Private documents with optional share tokens
- **â±ï¸ Query Caching** - 60-second cache for improved performance
- **ğŸš¦ Rate Limiting** - 60 requests per minute per user
- **ğŸ’¾ SQLite Database** - Zero-configuration, file-based database

## ğŸš€ Tech Stack

### Frontend
- **Next.js 15** - React framework with App Router
- **TypeScript** - Type-safe development
- **Tailwind CSS v4** - Modern utility-first styling
- **shadcn/ui** - High-quality UI components
- **Lucide Icons** - Beautiful, consistent icons

### Backend
- **Next.js API Routes** - Serverless API endpoints
- **SQLite** - Lightweight, file-based database
- **better-sqlite3** - Fast, synchronous SQLite driver
- **JWT** - Secure authentication tokens
- **bcryptjs** - Password hashing

### AI/ML
- **Vercel AI SDK** - AI integration framework
- **GPT-4o-mini** - Natural language answer generation
- **Vector Embeddings** - Semantic document understanding
- **Cosine Similarity** - Accurate relevance scoring
- **Chunking Strategy** - Optimized text segmentation

## ğŸ“‹ Prerequisites

- Node.js 18+ 
- npm, yarn, or pnpm
- Modern web browser

**No database setup required!** SQLite database is created automatically on first run.

## ğŸ› ï¸ Installation

**Option 1: Using shadcn CLI (Recommended)**

\`\`\`bash
npx shadcn@latest init
\`\`\`

Follow the prompts to set up the project with all dependencies.

**Option 2: Manual Installation**

1. **Clone or download the project**

\`\`\`bash
# If you have the ZIP file
unzip knowledgescout.zip
cd knowledgescout
\`\`\`

2. **Install dependencies**

\`\`\`bash
npm install
\`\`\`

3. **Set up environment variables**

Create a `.env.local` file in the root directory:

\`\`\`env
# JWT Secret (REQUIRED) - Generate a secure random string
# Generate using: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
\`\`\`

4. **Run the development server**

\`\`\`bash
npm run dev
\`\`\`

The SQLite database will be created automatically at `data/knowledgescout.db`.

Open [http://localhost:3000](http://localhost:3000) in your browser.

## ğŸ“– Usage

### First Time Setup

1. **Create an account** - Navigate to the home page and sign up
2. **Login** - Use your credentials to access the app
3. **Upload documents** - Go to the Documents page and upload your files
4. **Ask questions** - Navigate to the Ask page and start querying your documents
5. **Get AI answers** - Receive natural language answers generated by GPT-4o-mini based on your document content

### Document Management

- **Upload documents** - Support for PDF, TXT, MD, and DOCX formats
- **View documents** - See all your uploaded documents with metadata
- **Delete documents** - Remove documents with a confirmation dialog
- **Privacy controls** - Set documents as private or public with share tokens

### AI-Powered Q&A

The Q&A system works in two stages:

1. **Semantic Search** - Finds the most relevant document chunks using vector embeddings
2. **AI Answer Generation** - GPT-4o-mini synthesizes a natural language answer based on the retrieved context

This approach ensures answers are:
- **Accurate** - Based on your actual document content
- **Contextual** - Understands the meaning of your question
- **Natural** - Written in clear, conversational language
- **Cited** - Includes source document references

### Admin Features

Admin users have access to additional features:

- **Index Management** - Rebuild the search index
- **System Statistics** - View document counts, embeddings, and storage
- **System Health** - Monitor database and search index status

## ğŸ—ï¸ Project Structure

\`\`\`
knowledgescout/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ admin/               # Admin dashboard
â”‚   â”œâ”€â”€ api/                 # API routes
â”‚   â”‚   â”œâ”€â”€ auth/           # Authentication endpoints
â”‚   â”‚   â”œâ”€â”€ docs/           # Document management
â”‚   â”‚   â”œâ”€â”€ ask/            # Q&A endpoint with AI
â”‚   â”‚   â””â”€â”€ index/          # Index management
â”‚   â”œâ”€â”€ ask/                # Q&A interface
â”‚   â”œâ”€â”€ docs/               # Document management
â”‚   â”œâ”€â”€ globals.css         # Global styles
â”‚   â””â”€â”€ layout.tsx          # Root layout
â”œâ”€â”€ components/              # React components
â”‚   â”œâ”€â”€ ui/                 # shadcn/ui components
â”‚   â”œâ”€â”€ auth-provider.tsx   # Auth context
â”‚   â”œâ”€â”€ nav-bar.tsx         # Navigation
â”‚   â””â”€â”€ delete-document-dialog.tsx  # Document deletion
â”œâ”€â”€ lib/                     # Utilities
â”‚   â”œâ”€â”€ api-client.ts       # API client
â”‚   â”œâ”€â”€ auth.ts             # Auth utilities
â”‚   â”œâ”€â”€ db.ts               # SQLite database layer
â”‚   â”œâ”€â”€ embeddings.ts       # Vector embeddings
â”‚   â”œâ”€â”€ middleware.ts       # API middleware
â”‚   â”œâ”€â”€ search.ts           # Search logic
â”‚   â””â”€â”€ utils.ts            # Helper functions
â”œâ”€â”€ data/                    # SQLite database (auto-created)
â”‚   â””â”€â”€ knowledgescout.db   # Database file
â”œâ”€â”€ public/                  # Static assets
â””â”€â”€ package.json            # Dependencies
\`\`\`

## ğŸ—„ï¸ Database Schema

### Tables

**users**
- `id`: INTEGER PRIMARY KEY
- `email`: TEXT UNIQUE
- `password_hash`: TEXT
- `is_admin`: INTEGER (0 or 1)
- `created_at`: TEXT (ISO 8601)

**documents**
- `id`: INTEGER PRIMARY KEY
- `user_id`: TEXT (ref: users.id)
- `filename`: TEXT
- `content`: TEXT
- `page_count`: INTEGER
- `size_bytes`: INTEGER
- `is_private`: INTEGER (0 or 1)
- `share_token`: TEXT (nullable)
- `created_at`: TEXT (ISO 8601)

**embeddings**
- `id`: INTEGER PRIMARY KEY
- `document_id`: INTEGER (ref: documents.id)
- `page_number`: INTEGER
- `content`: TEXT
- `embedding`: TEXT (JSON array)
- `created_at`: TEXT (ISO 8601)

**query_cache**
- `id`: INTEGER PRIMARY KEY
- `query_hash`: TEXT UNIQUE
- `query`: TEXT
- `response`: TEXT (JSON)
- `expires_at`: TEXT (ISO 8601)
- `created_at`: TEXT (ISO 8601)

**rate_limits**
- `id`: INTEGER PRIMARY KEY
- `user_id`: TEXT
- `endpoint`: TEXT
- `request_count`: INTEGER
- `window_start`: TEXT (ISO 8601)

**idempotency_keys**
- `id`: INTEGER PRIMARY KEY
- `key`: TEXT
- `user_id`: TEXT
- `response`: TEXT (JSON)
- `created_at`: TEXT (ISO 8601)

## ğŸ”§ API Endpoints

### Authentication
- `POST /api/auth/register` - Register new user
- `POST /api/auth/login` - Login user

### Documents
- `POST /api/docs` - Upload document
- `GET /api/docs` - List documents (paginated)
- `GET /api/docs/:id` - Get document by ID
- `DELETE /api/docs/:id` - Delete document

### Q&A
- `POST /api/ask` - Ask question and get AI-generated answer

### Admin
- `POST /api/index/rebuild` - Rebuild search index
- `GET /api/index/stats` - Get index statistics

### System
- `GET /api/health` - Health check
- `GET /api/_meta` - API metadata
- `GET /.well-known/hackathon.json` - Hackathon metadata

## ğŸš¢ Deployment

### Deploy to Vercel (Recommended)

1. Push your code to GitHub
2. Import the project in Vercel
3. Add environment variables:
   - `JWT_SECRET` - Your JWT secret key
4. Deploy!

The AI features will automatically work on Vercel using the AI Gateway with GPT-4o-mini.

**Note:** The SQLite database will be created in the `/tmp` directory on Vercel. For production use with persistent data, consider using a managed database service.

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new)

## ğŸ” Security Features

- **JWT Authentication** - Secure token-based auth with 7-day expiration
- **Password Hashing** - bcrypt with salt rounds
- **Rate Limiting** - 60 requests per minute per user
- **Idempotency Keys** - Prevent duplicate operations
- **Query Caching** - 60-second cache with automatic expiration
- **Input Validation** - Sanitize all user inputs
- **Access Control** - Private documents with share tokens
- **Deletion Confirmation** - Prevent accidental document deletion

## ğŸ¤ Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“ License

This project is licensed under the MIT License.

## ğŸ™ Acknowledgments

- [Next.js](https://nextjs.org/) - The React framework
- [SQLite](https://www.sqlite.org/) - Lightweight database
- [better-sqlite3](https://github.com/WiseLibs/better-sqlite3) - Fast SQLite driver
- [Vercel AI SDK](https://sdk.vercel.ai/) - AI integration framework
- [shadcn/ui](https://ui.shadcn.com/) - Beautiful UI components
- [Tailwind CSS](https://tailwindcss.com/) - Utility-first CSS
- [Lucide](https://lucide.dev/) - Icon library

---

Built with â¤ï¸ using Next.js, SQLite, Vercel AI SDK, and GPT-4o-mini
